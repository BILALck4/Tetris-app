stages:
  - build
  - test
  - deploy


compile_job:
  stage: build
  image: openjdk:17  # Use a pre-configured image for Java
  script:
    - apt-get update && apt-get install -y ant
    - ant compile
  artifacts:
    paths:
      - bin/


test_job:
  stage: test
  image: openjdk:17
  script:
    - apt-get update && apt-get install -y ant
    - ant test
  dependencies:
    - compile_job

deploy_job:
  stage: deploy
  script:
    - echo "DÃ©ploiement en cours..."
    - scp -r bin/ e22409386@gitlab-depinfo-2024.univ-brest.fr:/home/e22409386/tetris_project/

  only:
    - master
