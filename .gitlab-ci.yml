image: docker:latest

stages:
  - build

variables:
  DOCKER_IMAGE: "tetris-app"

build:
  stage: build
  script:
    - echo "Checking files in current directory:"
    - ls -l 
    - docker build --no-cache -t $DOCKER_IMAGE .  
    - docker create --name temp_container $DOCKER_IMAGE
    - docker cp temp_container:/app/Tetris.jar .  
    - docker rm temp_container
  only:
    - main
  artifacts:
    paths:
      - Tetris.jar  
